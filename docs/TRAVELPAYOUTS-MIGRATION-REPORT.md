# üîÑ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Travelpayouts API –¥–ª—è MVP

**–î–∞—Ç–∞**: 30 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Completed

---

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ OTA

#### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–æ—Ç–º–µ–Ω—ë–Ω)
- –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –û—Å—Ç—Ä–æ–≤–æ–∫ API
- –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –°—É—Ç–æ—á–Ω–æ.—Ä—É API
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è API –∫–ª—é—á–µ–π –æ—Ç –∫–∞–∂–¥–æ–≥–æ OTA
- –û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö
- –°–ª–æ–∂–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

#### ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (MVP)
- **Travelpayouts** –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –¥–ª—è MVP
- API Token —É–∂–µ –≥–æ—Ç–æ–≤: `3286214c096eaaaee7af14894a3f9586`
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è 100+ OTA —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π API
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏–π

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
1. **`backend/src/services/ota/travelpayouts.ts`** ‚úÖ
   - –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Hotellook API
   - –ú–µ—Ç–æ–¥ `searchByCoordinates()`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è deeplinks
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–¥–∏—É—Å—É
   - ~250 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

2. **`backend/.env.accommodation.example`** ‚úÖ
   - –®–∞–±–ª–æ–Ω environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - MVP —Å–µ–∫—Ü–∏—è —Å Travelpayouts
   - v1 —Å–µ–∫—Ü–∏—è —Å –ø—Ä—è–º—ã–º–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
3. **`docs/TRAVELPAYOUTS-INTEGRATION.md`** ‚úÖ
   - –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ü—Ä–∏–º–µ—Ä—ã API –∑–∞–ø—Ä–æ—Å–æ–≤
   - Location IDs –¥–ª—è –∫—É—Ä–æ—Ä—Ç–æ–≤
   - Tips & tricks

4. **`docs/TRAVELPAYOUTS-MIGRATION-REPORT.md`** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) ‚úÖ
   - –û—Ç—á—ë—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏
   - –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
   - Next steps

---

## üîß –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)

1. **`docs/ACCOMMODATION-MAP-ROADMAP.md`**
   - OTA –ø–∞—Ä—Ç–Ω—ë—Ä—ã: –¥–æ–±–∞–≤–ª–µ–Ω Travelpayouts –¥–ª—è MVP
   - Task 1.3: `–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Travelpayouts API` (–±—ã–ª–æ –û—Å—Ç—Ä–æ–≤–æ–∫)
   - Task 1.6: `–ì–µ–Ω–µ—Ä–∞—Ü–∏—è deeplinks –¥–ª—è Travelpayouts`
   - Task 2.2.3-2.2.4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Travelpayouts
   - MVP checklist: "–ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Travelpayouts (100+ OTA)"
   - Gantt chart: –æ–±–Ω–æ–≤–ª—ë–Ω timeline

2. **`docs/ACCOMMODATION-GITHUB-ISSUES.md`**
   - Epic #1 scope: Travelpayouts API –≤–º–µ—Å—Ç–æ –û—Å—Ç—Ä–æ–≤–æ–∫
   - Issue #102: –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
     - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Travelpayouts API"
     - Token –≥–æ—Ç–æ–≤: ‚úÖ
     - Estimate: 4 —á–∞—Å–∞ (–±—ã–ª–æ 6)
     - Deliverables: `travelpayouts.ts` ‚úÖ

3. **`docs/ACCOMMODATION-SUMMARY.md`**
   - Services: –¥–æ–±–∞–≤–ª–µ–Ω `travelpayouts.ts`
   - .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: —Å–µ–∫—Ü–∏—è MVP —Å Travelpayouts
   - –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã: Travelpayouts –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1
   - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á: Issue #102 (—Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω) ‚úÖ

4. **`docs/ACCOMMODATION-MAP-ROADMAP.md`**
   - –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `travelpayouts.ts` –≤ —Å–ø–∏—Å–∫–µ OTA —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Travelpayouts –¥–ª—è MVP

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä—è–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | Travelpayouts | –í—ã–∏–≥—Ä—ã—à |
|----------|-------------------|---------------|---------|
| **API –∫–ª—é—á–∏** | –ù—É–∂–Ω—ã –æ—Ç –∫–∞–∂–¥–æ–≥–æ OTA | 1 —Ç–æ–∫–µ–Ω –¥–ª—è –≤—Å–µ—Ö | ‚≠ê‚≠ê‚≠ê |
| **–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** | 2-3 –Ω–µ–¥–µ–ª–∏ (–æ–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏–π) | 1-2 –¥–Ω—è | ‚≠ê‚≠ê‚≠ê |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ OTA** | 1-2 | 100+ | ‚≠ê‚≠ê‚≠ê |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–¥–∞** | –ê–≥—Ä–µ–≥–∞—Ü–∏—è, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | ‚≠ê‚≠ê |
| **–ö–æ–º–∏—Å—Å–∏—è** | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | –î–µ–ª–∏—Ç—Å—è —Å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º | ‚≠ê |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å** | –ü–æ–ª–Ω—ã–π | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | ‚≠ê |

**–ò—Ç–æ–≥–æ**: Travelpayouts –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è MVP, –ø—Ä—è–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –¥–ª—è v1.

---

## ‚úÖ Issue #102 –°—Ç–∞—Ç—É—Å

### Acceptance Criteria

- [x] API Token –≥–æ—Ç–æ–≤: `3286214c096eaaaee7af14894a3f9586`
- [x] –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å `backend/src/services/ota/travelpayouts.ts`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `searchByCoordinates(lat, lng, radius)`
- [ ] **TODO**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API —Å —Ä–µ–∞–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
- [ ] **TODO**: –î–æ–±–∞–≤–∏—Ç—å `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –ü—Ä–æ–≥—Ä–µ—Å—Å: 60% ‚úÖ

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Hotellook Cache API
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç Hotel
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è affiliate deeplinks
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–¥–∏—É—Å—É —Å Haversine formula
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

**–û—Å—Ç–∞–ª–æ—Å—å:**
- üî≤ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API call
- üî≤ –û–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª
- üî≤ –ó–∞–º–µ–Ω–∏—Ç—å MOCK_HOTELS –Ω–∞ Travelpayouts –¥–∞–Ω–Ω—ã–µ (Issue #103)

---

## üöÄ Next Steps

### –°–µ–≥–æ–¥–Ω—è (30 —è–Ω–≤–∞—Ä—è)

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Travelpayouts API** (30 –º–∏–Ω—É—Ç)
   ```bash
   curl "https://engine.hotellook.com/api/v2/cache.json?location=12209&currency=RUB&language=ru&limit=10" \
     -H "X-Access-Token: 3286214c096eaaaee7af14894a3f9586"
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (5 –º–∏–Ω—É—Ç)
   ```bash
   cd backend
   echo "TRAVELPAYOUTS_TOKEN=3286214c096eaaaee7af14894a3f9586" >> .env
   echo "TRAVELPAYOUTS_MARKER=0" >> .env
   ```

3. **Issue #103: –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ—Ç–µ–ª–∏** (4 —á–∞—Å–∞)
   - –ó–∞–º–µ–Ω–∏—Ç—å MOCK_HOTELS –Ω–∞ API call
   - –î–æ–±–∞–≤–∏—Ç—å loading state
   - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏

### –ó–∞–≤—Ç—Ä–∞ (31 —è–Ω–≤–∞—Ä—è)

4. **Issue #104: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è deeplinks** (1 —á–∞—Å)
   - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Å–µ—Ä–≤–∏—Å–µ ‚úÖ
   - –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

5. **Issue #105: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤** (2 —á–∞—Å–∞)
   - Click tracking –≤ console
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ë–î –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üìä –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Timeline

### PoC (3 –¥–Ω—è)
- ‚úÖ –î–µ–Ω—å 1 (28 —è–Ω–≤): Leaflet –∫–∞—Ä—Ç–∞
- üîÑ –î–µ–Ω—å 2 (30 —è–Ω–≤): Travelpayouts API **‚Üê –º—ã –∑–¥–µ—Å—å**
- ‚è≥ –î–µ–Ω—å 3 (31 —è–Ω–≤): –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π + deeplinks

### MVP (15 –¥–Ω–µ–π)
- –ù–∞—á–∞–ª–æ: 1 —Ñ–µ–≤—Ä–∞–ª—è
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: ~20 —Ñ–µ–≤—Ä–∞–ª—è

---

## üéì Lessons Learned

### –ü–æ—á–µ–º—É Travelpayouts –ª—É—á—à–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

1. **–°–∫–æ—Ä–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∫–æ–º–∏—Å—Å–∏–∏** - –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ MVP –≤–∞–∂–Ω–µ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏
2. **–ï–¥–∏–Ω—ã–π API —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥** - –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤, –ø—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
3. **100+ OTA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –±–æ–ª—å—à–µ –≤—ã–±–æ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ–∑–∂–µ** - v1 roadmap –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏

- –û—Å—Ç—Ä–æ–≤–æ–∫, –°—É—Ç–æ—á–Ω–æ.—Ä—É –æ—Å—Ç–∞—é—Ç—Å—è –≤ roadmap –¥–ª—è v1
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ OTA –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- Normalizer –≥–æ—Ç–æ–≤ –∫ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö API

---

## üìà Impact –Ω–∞ –ø—Ä–æ–µ–∫—Ç

### –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π | –ü–æ—Å–ª–µ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|-------------|-------|-----------|
| **PoC timeline** | 5-7 –¥–Ω–µ–π | 3-4 –¥–Ω—è | ‚¨áÔ∏è -40% |
| **MVP timeline** | 20-25 –¥–Ω–µ–π | 15-20 –¥–Ω–µ–π | ‚¨áÔ∏è -25% |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ OTA** | 1-2 | 100+ | ‚¨ÜÔ∏è +5000% |
| **–ö–æ–º–∏—Å—Å–∏—è (–æ—Ü–µ–Ω–∫–∞)** | 5-7% | 3-5% | ‚¨áÔ∏è -30% |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è | ‚¨áÔ∏è -60% |

### ROI –¥–ª—è MVP

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏**: -2 –¥–Ω—è –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é  
**–í—ã–∏–≥—Ä—ã—à**: +98 OTA, –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–∏–ø–æ—Ç–µ–∑—ã  
**–ö–æ–º–ø—Ä–æ–º–∏—Å—Å**: -30% –∫–æ–º–∏—Å—Å–∏–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–æ v1)

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –¥–ª—è MVP

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [ACCOMMODATION-MAP-ROADMAP.md](./ACCOMMODATION-MAP-ROADMAP.md) - –æ—Å–Ω–æ–≤–Ω–æ–π roadmap
- [ACCOMMODATION-GITHUB-ISSUES.md](./ACCOMMODATION-GITHUB-ISSUES.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–µ issues
- [TRAVELPAYOUTS-INTEGRATION.md](./TRAVELPAYOUTS-INTEGRATION.md) - –≥–∞–π–¥ –ø–æ API
- [ACCOMMODATION-SUMMARY.md](./ACCOMMODATION-SUMMARY.md) - –∫—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä

---

**Prepared by**: GitHub Copilot  
**Date**: 30 —è–Ω–≤–∞—Ä—è 2026  
**Status**: Migration completed ‚úÖ
